---
title: "[Typescript] Typescript conditional interface in react component"
date: 2022-05-18
tags: [Typescript, React]
slug: typescript/conditional-interface-in-react-component
banner: /images/ts-banner.png
---

## 컴포넌트에 특정 prop이 있으면 나머지 prop은 optional 처리하는 interface

### id만 있는 경우(id로 데이터 페칭하는 경우)

```tsx
<Component id={id} />
```

### content가 있는 경우 description은 required

```tsx
<Component content={content} description={description} />
```

### 모두 optional 처리하지 않고 id 혹은 content, description이 required가 되는 컴포넌트 interface를 만들기

## 해결

```tsx
interface CommonProps {
  index: number;
}

interface PropsWithId {
  id: string;
  content?: never;
  description?: never;
}

interface PropsWithContent {
  id?: never;
  content: string;
  description: string;
}

type ConditionalProps = PropsWithId | PropsWithContent;
type Props = CommonProps & ConditionalProps;

const Component = ({ index, id, content, description }: Props) => (
  <div>
    <h1>I'm Component {index}</h1>
    {id && <p>id: {id}</p>}
    {content && <p>content: {content}</p>}
    {description && <p>description: {description}</p>}
  </div>
);

export default function App() {
  return (
    <div className="App">
      <Component index={1} id="1" />
      <Component index={2} content="content" description="description" />
      <Component index={3} />
    </div>
  );
}
```

<iframe
  src="https://codesandbox.io/embed/crazy-resonance-v5d5ib?fontsize=14&hidenavigation=1&theme=dark"
  style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
  title="crazy-resonance-v5d5ib"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

## 참고

- https://www.typescriptlang.org/docs/handbook/2/conditional-types.html
- https://dev.to/maissenayed/conditional-react-props-with-typescript-43lg
  - https://www.benmvp.com/blog/conditional-react-props-typescript/ 위 게시물 댓글에 이게 원본이라고 함.
